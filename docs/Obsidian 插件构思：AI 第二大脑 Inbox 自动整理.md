# Obsidian 插件构思：AI 第二大脑快捷功能 (Second Brain Shortcuts)

## 一、 插件定位

该插件旨在作为“第二大脑”的辅助动力，通过 AI 减少知识管理的摩擦力。其核心逻辑是利用小模型或 API 对碎片化信息进行快速预处理。

## 二、 第一期目标：Inbox 自动整理

解决 Inbox 文件夹堆积、分类难的问题。通过 AI 扫描指定文件夹，自动给出分类建议并支持一键归档。

## 三、 核心功能逻辑

### 1. 配置依赖

- **API 配置**：支持复用现有插件（如 Copilot）的 API 配置，避免重复输入。
- **路径指定**：用户可自定义一个文件夹作为 `Inbox`。

### 2. AI 结构化整理

AI 会对 Inbox 里的所有文件进行扫描，并输出一个包含以下字段的**结构化表格**：
- **文件名 (Filename)**：当前文件的原始名称。
- **目标路径 (Target Folder)**：AI 根据 PARA 或现有目录结构推荐的去处。
- **推荐标签 (Tags)**：AI 推荐打上的双链标签或普通标签。
- **Area 属性 (Area Property)**：专门针对 `Area` 这一 Property 的推荐。如果库中有相关的 MOC (Map of Content) 文件，AI 应优先推荐链接到对应的 MOC。

### 3. 严格输出控制

- **强约束校验**：由于 Copilot 默认输出文本，该插件需在 Prompt 中严格要求 JSON 或特定结构化格式。
- **报错重试机制**：如果 AI 输出不符合结构化要求，系统自动捕获错误并触发重试，直到输出正确为止，确保数据的可处理性。

## 四、 交互设计 (UX)

- **预览模式**：在整理界面显示 AI 生成的建议表格。
- **执行方式**：
	- **一键移入**：点击按钮，按照 AI 建议将所有文件批量移动到目标文件夹并写入属性。
	- **逐条确认**：用户可以对每一行建议点击“确定”进行移动，或手动修改 AI 的建议。
	- **选择性忽略**：勾选不希望处理的文件。

## 五、 技术实现思路

- 监听 Inbox 文件夹变动。
- 调用指定的 LLM API 进行 Batch Processing。
- 使用 Obsidian API 进行文件移动 (`app.fileManager.renameFile`) 和元数据写入 (`app.fileManager.processFrontMatter`)。
